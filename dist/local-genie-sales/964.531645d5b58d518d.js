"use strict";(self.webpackChunklocal_genie_sales=self.webpackChunklocal_genie_sales||[]).push([[964],{8964:(L,g,d)=>{d.r(g),d.d(g,{ServiceProviderModule:()=>k});var a=d(6895),u=d(6773),l=d(433),e=d(8256),b=d(501),p=d(563),f=d(2013),h=d(688);function _(o,n){if(1&o&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&o){const r=n.$implicit,t=e.oxw(2);e.Tol(t.class),e.xp6(1),e.Oqu(r)}}function C(o,n){if(1&o&&(e.TgZ(0,"ul",1),e.YNc(1,_,2,3,"li",2),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.listOfErrors())}}let Z=(()=>{class o{constructor(){this.class="r-c",this.field="Field",this.msg="",this.control=new l.NI}shouldShowErrors(){return this.control&&this.control.errors&&(this.control.dirty||this.control.touched)}listOfErrors(){return this.control&&this.control.errors&&Object.keys(this.control.errors).length?Object.keys(this.control.errors).map(r=>this.getMessage(r,this.control&&this.control.errors&&this.control.errors[r]?this.control.errors[r]:"",this.field,this.msg)):[]}getMessage(r,t,s,i=""){switch(r){case"required":return i||s+" can't be blank";case"minlength":return i||"The min number of characters is "+t.requiredLength;case"maxlength":return i||"The max allowed number of characters is "+t.requiredLength;case"pattern":return i||"The required pattern is: "+t.requiredPattern;case"email":case"name":case"error":case"number":case"mobile":case"year":case"fulldate":case"passowrd":return i||t.message+". Ex: "+t.example}return""}}return o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["tn-form-error"]],inputs:{control:"control",class:"class",field:"field",msg:"msg"},decls:1,vars:1,consts:[["class","r-ul",4,"ngIf"],[1,"r-ul"],[3,"class",4,"ngFor","ngForOf"]],template:function(r,t){1&r&&e.YNc(0,C,2,1,"ul",0),2&r&&e.Q6J("ngIf",t.shouldShowErrors())},dependencies:[a.sg,a.O5],styles:[".r-ul[_ngcontent-%COMP%]{list-style:none;margin-block-start:0;padding-inline-start:0;font-size:80%;margin:0}.r-c[_ngcontent-%COMP%]{color:red}"]}),o})();function F(o,n){if(1&o&&(e.TgZ(0,"option",26),e._uU(1),e.qZA()),2&o){const r=n.$implicit;e.Q6J("value",null==r?null:r.categoryId),e.xp6(1),e.hij("",null==r?null:r.categoryName," ")}}const c=function(o){return{"border-color":o}},A=function(o,n,r){return{color:o,"font-size":n,"border-color":r}},I=function(o){return{color:o}};function N(o,n){if(1&o&&(e.TgZ(0,"form",6)(1,"div",7)(2,"label",8),e._uU(3,"Name"),e.qZA(),e._UZ(4,"input",9)(5,"tn-form-error",10),e.qZA(),e.TgZ(6,"div",7)(7,"label",11),e._uU(8,"Category"),e.qZA(),e.TgZ(9,"select",12)(10,"option",13),e._uU(11,"Select Category"),e.qZA(),e.YNc(12,F,2,2,"option",14),e.qZA(),e._UZ(13,"tn-form-error",10),e.qZA(),e.TgZ(14,"div",15)(15,"label",16),e._uU(16,"Mobile"),e.qZA(),e.TgZ(17,"span",17),e._uU(18,"+91"),e.qZA(),e._UZ(19,"input",18)(20,"tn-form-error",10),e.qZA(),e.TgZ(21,"div",7)(22,"label",19),e._uU(23,"Pincode"),e.qZA(),e._UZ(24,"input",20)(25,"tn-form-error",10),e.qZA(),e.TgZ(26,"div",7)(27,"label",21),e._uU(28,"Address"),e.qZA(),e._UZ(29,"textarea",22)(30,"tn-form-error",10),e.qZA(),e.TgZ(31,"div",7)(32,"div",23),e._UZ(33,"input",24),e.TgZ(34,"label",25),e._uU(35,"Do you deliver to door step?"),e.qZA()()()()),2&o){const r=e.oxw();let t,s,i,m,v,y,P;e.Q6J("formGroup",r.addForm),e.xp6(4),e.Q6J("ngStyle",e.VKq(19,c,null!=(t=r.addForm.get("serviceProviderName"))&&t.invalid&&null!=(t=r.addForm.get("serviceProviderName"))&&t.touched?"red":"rgba(0,0,0,0)")),e.xp6(1),e.Q6J("control",r.addForm.get("serviceProviderName"))("field","Name"),e.xp6(4),e.Q6J("ngStyle",e.kEZ(21,A,null!=(s=r.addForm.get("categoryId"))&&s.value?"":"var(--font-color)",null!=(s=r.addForm.get("categoryId"))&&s.value?"":"90%",null!=(s=r.addForm.get("categoryId"))&&s.invalid&&null!=(s=r.addForm.get("categoryId"))&&s.touched?"red":"rgba(0,0,0,0)")),e.xp6(3),e.Q6J("ngForOf",r.categories),e.xp6(1),e.Q6J("control",r.addForm.get("categoryId"))("field","Category"),e.xp6(6),e.Q6J("ngStyle",e.VKq(25,c,null!=(i=r.addForm.get("mobileNumber"))&&i.invalid&&null!=(i=r.addForm.get("mobileNumber"))&&i.touched?"red":"rgba(0,0,0,0)")),e.xp6(1),e.Q6J("control",r.addForm.get("mobileNumber"))("field","Mobile"),e.xp6(4),e.Q6J("ngStyle",e.VKq(27,c,null!=(m=r.addForm.get("pinCode"))&&m.invalid&&null!=(m=r.addForm.get("pinCode"))&&m.touched?"red":"rgba(0,0,0,0)")),e.xp6(1),e.Q6J("control",r.addForm.get("pinCode"))("field","Pincode"),e.xp6(4),e.Q6J("ngStyle",e.VKq(29,c,null!=(v=r.addForm.get("address"))&&v.invalid&&null!=(v=r.addForm.get("address"))&&v.touched?"red":"rgba(0,0,0,0)")),e.xp6(1),e.Q6J("control",r.addForm.get("address"))("field","Address"),e.xp6(2),e.Q6J("ngStyle",e.VKq(31,c,null!=(y=r.addForm.get("deliveryService"))&&y.value?"var(--secondary-color)":"")),e.xp6(2),e.Q6J("ngStyle",e.VKq(33,I,null!=(P=r.addForm.get("deliveryService"))&&P.value?"var(--secondary-color)":""))}}function T(o,n){1&o&&e._UZ(0,"i",27)}let E=(()=>{class o{constructor(r,t,s,i){this.categoriesService=r,this.serviceProviderService=t,this.router=s,this.notificationService=i,this.categories=[],this.showSpinner=!1}ngOnInit(){this.addForm=new l.cw({serviceProviderName:new l.NI("",[l.kI.required,l.kI.minLength(3)]),mobileNumber:new l.NI("",[l.kI.required,o=>{const n=o?.value;return n&&""!=n&&!/^[6-9][0-9]{9}$/.test(n)?{mobile:{message:"Please enter valid mobile",value:o?.value,example:"9876543210"}}:null}]),pinCode:new l.NI("",[l.kI.required,o=>{const n=o?.value;return n&&!/^[1-9][0-9]{5}$/i.test(n)?{pincode:{message:"Please enter valid pincode address",value:o?.value,example:"560037"}}:null}]),deliveryService:new l.NI(!0,[l.kI.required]),categoryId:new l.NI("",[l.kI.required]),address:new l.NI("",[l.kI.required,l.kI.minLength(6)])}),this.getCategories()}getCategories(){this.categoriesService.GetCategories().subscribe(r=>{this.categories=r},r=>{this.notificationService.showError(r?.error?.message||r?.statusText)})}addServiceProvider(){this.addForm.markAllAsTouched(),console.log(this.addForm),this.addForm.invalid||(this.showSpinner=!0,this.serviceProviderService.addServiceProvider({...this.addForm.value,mobileNumber:"91"+this.addForm.value.mobileNumber}).subscribe(t=>{this.router.navigate(["/items","add"],{queryParams:{businessCode:t.businessCode,serviceProviderId:t.serviceProviderId,categoryId:this.addForm.value.categoryId}}),this.showSpinner=!1},t=>{this.showSpinner=!1,console.log(t),this.notificationService.showError(t?.error?.message)}))}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(b.G),e.Y36(p.G),e.Y36(u.F0),e.Y36(f.g))},o.\u0275cmp=e.Xpm({type:o,selectors:[["lgs-add-service-provider"]],decls:7,vars:5,consts:[[3,"title","showBack"],[1,"body"],["class","w-80 m-lr-auto",3,"formGroup",4,"ngIf"],[1,"w-80","m-lr-auto","m-t-30"],[1,"button-border","w-100",3,"disabled","click"],["class","gg-spinner m-l-10",4,"ngIf"],[1,"w-80","m-lr-auto",3,"formGroup"],[1,"m-t-30"],["for","serviceProviderName"],["type","text","formControlName","serviceProviderName","name","serviceProviderName","placeholder","Name",3,"ngStyle"],[3,"control","field"],["for","categoryId"],["name","categoryId","id","categoryId","formControlName","categoryId",3,"ngStyle"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"m-t-30","pos-relative"],["for","mobileNumber"],[1,"code"],["type","text","formControlName","mobileNumber","name","mobileNumber","placeholder","Mobile",2,"padding-left","45px",3,"ngStyle"],["for","pinCode"],["type","text","formControlName","pinCode","name","pinCode","placeholder","Pincode",3,"ngStyle"],["for","address"],["formControlName","address","name","address","rows","6","placeholder","Address",3,"ngStyle"],[1,"deliver",3,"ngStyle"],["type","checkbox","formControlName","deliveryService","name","deliveryService"],["for","deliveryService",2,"display","inline-block","margin-left","10px",3,"ngStyle"],[3,"value"],[1,"gg-spinner","m-l-10"]],template:function(r,t){1&r&&(e._UZ(0,"lgs-header",0),e.TgZ(1,"div",1),e.YNc(2,N,36,35,"form",2),e.TgZ(3,"div",3)(4,"button",4),e.NdJ("click",function(){return t.addServiceProvider()}),e._uU(5,"Submit "),e.YNc(6,T,1,0,"i",5),e.qZA()()()),2&r&&(e.Q6J("title","Add Service Provider")("showBack",!0),e.xp6(2),e.Q6J("ngIf",t.addForm),e.xp6(2),e.Q6J("disabled",t.showSpinner),e.xp6(2),e.Q6J("ngIf",t.showSpinner))},dependencies:[a.sg,a.O5,a.PC,h.G,l._Y,l.YN,l.Kr,l.Fj,l.Wl,l.EJ,l.JJ,l.JL,l.sg,l.u,Z],styles:[".code[_ngcontent-%COMP%]{position:absolute;top:45px;color:var(--font-color);left:10px;font-size:15px}label[_ngcontent-%COMP%]{display:block}.deliver[_ngcontent-%COMP%]{border:2px solid var(--background-color);padding:15px;border-radius:5px;font-size:80%}button[_ngcontent-%COMP%]{display:flex;justify-items:center;justify-content:center}"]}),o})();const q=function(){return["/items","add"]};function J(o,n){if(1&o&&(e.TgZ(0,"a",5)(1,"div")(2,"h4"),e._uU(3),e.qZA(),e.TgZ(4,"p",6),e._uU(5),e.qZA()(),e._UZ(6,"i",7),e.qZA()),2&o){const r=n.$implicit,t=e.oxw();e.Q6J("routerLink",e.DdM(4,q))("queryParams",t.queryParams(r)),e.xp6(3),e.Oqu(r.serviceProviderName),e.xp6(2),e.Oqu(r.address)}}const w=function(){return["/service-provider","add"]},M=[{path:"list",component:(()=>{class o{constructor(r,t){this.serviceProviderService=r,this.notificationService=t,this.serviceProviders=[]}ngOnInit(){this.getServiceProviders()}getServiceProviders(){this.serviceProviderService.getServiceProviders().subscribe(r=>{this.serviceProviders=r},r=>{console.log(r),this.notificationService.showError(r?.error?.message||r?.statusText)})}getCategoryId(r=""){return"A B C D E F G H I J K L M N O P Q R T S U V W X Y Z".split(" ").indexOf(r.replace(/[0-9]{7}([A-Z])[A-Z]{2}/,"$1"))+1}queryParams(r){return{businessCode:r.businessCode,serviceProviderId:r.serviceProviderId,categoryId:this.getCategoryId(r.businessCode)}}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(p.G),e.Y36(f.g))},o.\u0275cmp=e.Xpm({type:o,selectors:[["lgs-list-service-provider"]],decls:5,vars:4,consts:[[3,"title"],[1,"body"],["class","card flex",3,"routerLink","queryParams",4,"ngFor","ngForOf"],[1,"fab-icon",3,"routerLink"],[1,"gg-math-plus"],[1,"card","flex",3,"routerLink","queryParams"],[1,"font-80"],[1,"gg-chevron-right"]],template:function(r,t){1&r&&(e._UZ(0,"lgs-header",0),e.TgZ(1,"div",1),e.YNc(2,J,7,5,"a",2),e.qZA(),e.TgZ(3,"a",3),e._UZ(4,"i",4),e.qZA()),2&r&&(e.Q6J("title","Service Providers"),e.xp6(2),e.Q6J("ngForOf",t.serviceProviders),e.xp6(1),e.Q6J("routerLink",e.DdM(3,w)))},dependencies:[a.sg,u.yS,h.G]}),o})()},{path:"add",component:E},{path:"",redirectTo:"list",pathMatch:"full"}];let O=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.Bz.forChild(M),u.Bz]}),o})();var Q=d(5130);let U=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[a.ez]}),o})(),k=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[a.ez,O,Q.O,l.UX,U]}),o})()}}]);